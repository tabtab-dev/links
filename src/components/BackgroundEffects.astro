---
export interface Props {
  showParticles?: boolean;
  gradient?: boolean;
}

const { showParticles = true, gradient = true } = Astro.props;
---

<!-- 背景渐变 -->
<div class="fixed inset-0 -z-10 pointer-events-none">
  {gradient && (
    <div class="absolute inset-0 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-blue-900 dark:to-purple-900 opacity-30"></div>
  )}
  
  <!-- 装饰性形状 -->
  <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-200 dark:bg-blue-800 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-20 animate-pulse"></div>
  <div class="absolute top-1/3 right-1/4 w-72 h-72 bg-purple-200 dark:bg-purple-800 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-20 animate-pulse animation-delay-2000"></div>
  <div class="absolute bottom-1/4 left-1/3 w-80 h-80 bg-pink-200 dark:bg-pink-800 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-20 animate-pulse animation-delay-4000"></div>
</div>

{showParticles && (
  <div class="fixed inset-0 -z-10 pointer-events-none">
    <div id="particles-js" class="absolute inset-0"></div>
  </div>
)}

<style>
@keyframes float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  33% {
    transform: translateY(-20px) rotate(120deg);
  }
  66% {
    transform: translateY(20px) rotate(240deg);
  }
}

.animation-delay-2000 {
  animation-delay: 2s;
}

.animation-delay-4000 {
  animation-delay: 4s;
}

/* 粒子效果样式 */
.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: rgba(59, 130, 246, 0.5);
  border-radius: 50%;
  animation: float 6s ease-in-out infinite;
}

.particle:nth-child(odd) {
  background: rgba(147, 51, 234, 0.5);
  animation-duration: 8s;
}

.particle:nth-child(3n) {
  background: rgba(236, 72, 153, 0.5);
  animation-duration: 10s;
}
</style>

<script>
// 粒子效果
function createParticles() {
  const container = document.querySelector('#particles-js');
  if (!container) return;

  const particleCount = 50;
  
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    
    // 随机位置
    particle.style.left = Math.random() * 100 + '%';
    particle.style.top = Math.random() * 100 + '%';
    
    // 随机延迟
    particle.style.animationDelay = Math.random() * 6 + 's';
    
    // 随机透明度
    particle.style.opacity = String(Math.random() * 0.5 + 0.1);
    
    container.appendChild(particle);
  }
}

// 页面加载完成后创建粒子
document.addEventListener('DOMContentLoaded', createParticles);
</script>